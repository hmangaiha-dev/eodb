"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[5464],{5464:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var o=a(3673),l=a(2323);const n={class:"col-md-3 bg-grey-1"},s={class:"col-md-9 column q-gutter-md"},i={class:"zcard bg-grey-1 q-pt-lg row"},r={class:"col-9"},c={class:"zlabel"},m=(0,o.Uk)("Application : "),p={class:"zvalue"},d={class:"zlabel"},u=(0,o.Uk)("Regn No : "),v={class:"zvalue"},g={class:"col-3 flex justify-end"},f={class:"zcard q-mt-sm rounded-borders q-pa-md flex justify-between"};function w(e,t,a,w,b,y){const W=(0,o.up)("List"),h=(0,o.up)("q-btn"),_=(0,o.up)("router-view"),q=(0,o.up)("movement"),k=(0,o.up)("q-drawer"),z=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(z,{class:"row q-col-gutter-md q-ma-none container-lg"},{default:(0,o.w5)((()=>{var a,b,y;return[(0,o.Wm)("div",n,[(0,o.Wm)(W,{notes:w.localData.notes},null,8,["notes"])]),(0,o.Wm)("div",s,[(0,o.Wm)("div",i,[(0,o.Wm)("div",r,[(0,o.Wm)("div",c,[m,(0,o.Wm)("span",p,(0,l.zw)(null===(a=w.localData)||void 0===a||null===(b=a.profile)||void 0===b?void 0:b.title),1)]),(0,o.Wm)("div",d,[u,(0,o.Wm)("span",v,(0,l.zw)(null===(y=w.localData)||void 0===y?void 0:y.regn_no),1)])]),(0,o.Wm)("div",g,[(0,o.Wm)(h,{onClick:t[1]||(t[1]=e=>{w.localData.openHistory=!w.localData.openHistory,w.fetchMovements()}),"no-caps":"",outline:"",flat:"",label:"Movement history"}),(0,o.Wm)(h,{to:{name:"application:detail"},"no-caps":"",color:"primary",flat:"",label:"View more"})])]),(0,o.Wm)("div",f,[(0,o.Wm)(h,{outline:"",color:"negative",label:"Send back"}),(0,o.Wm)(h,{onClick:w.handleForward,outline:"",color:"primary",label:"Forward"},null,8,["onClick"])]),(0,o.Wm)(_,{onNotes:t[2]||(t[2]=e=>w.localData.notes=e)})]),(0,o.Wm)(h,{to:{name:"note:create",params:{id:e.$route.params.id}},fab:"",icon:"edit",color:"primary",class:"absolute-bottom-right q-mr-xl q-mb-xl"},null,8,["to"]),(0,o.Wm)(k,{modelValue:w.localData.openHistory,"onUpdate:modelValue":t[3]||(t[3]=e=>w.localData.openHistory=e),side:"right",behavior:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{movements:w.localData.movements},null,8,["movements"])])),_:1},8,["modelValue"])]})),_:1})}a(7280),a(5363);var b=a(1959);const y=(0,o.Wm)("h1",{class:"zsubtitle q-ma-md"},"Notes",-1);function W(e,t,a,n,s,i){const r=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),m=(0,o.up)("q-item"),p=(0,o.up)("q-list"),d=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(o.HY,null,[y,(0,o.Wm)(p,{title:"Notes",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.$props.notes,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(m,{to:{name:"note:detail",params:{id:e.$route.params.id,note:t.id}},key:t.id,clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(null===t||void 0===t?void 0:t.title),1)])),_:2},1024),(0,o.Wm)(r,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(null===t||void 0===t?void 0:t.written_by),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[d]]))),128))])),_:1})],64)}var h=a(9582),_=a(5474);const q={props:["notes"],setup(e,t){(0,h.yj)();return{}}};var k=a(7011),z=a(3414),D=a(2035),Z=a(2350),j=a(6489),Q=a(7518),H=a.n(Q);q.render=W;const $=q;H()(q,"components",{QList:k.Z,QItem:z.Z,QItemSection:D.Z,QItemLabel:Z.Z}),H()(q,"directives",{Ripple:j.Z});var U=a(8825);const C={class:"q-pa-lg"},L=(0,o.Wm)("h1",{class:"zsubtitle"},"Application movements",-1),S=(0,o.Wm)("br",null,null,-1),x={class:"zlabel"},M=(0,o.Uk)("Holding hour :"),N={class:"zvalue"},V=(0,o.Uk)(" hrs");function F(e,t,a,n,s,i){const r=(0,o.up)("q-timeline-entry"),c=(0,o.up)("q-timeline");return(0,o.wg)(),(0,o.j4)("div",C,[L,S,(0,o.Wm)(c,{color:"secondary"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.$props.movements,((e,t)=>((0,o.wg)(),(0,o.j4)(r,{title:null===e||void 0===e?void 0:e.staff_name,key:t,subtitle:"Received at "+(null===e||void 0===e?void 0:e.received_at)},{default:(0,o.w5)((()=>[(0,o.Wm)("p",x,[M,(0,o.Wm)("span",N,(0,l.zw)(e.duration),1),V])])),_:2},1032,["title","subtitle"])))),128))])),_:1})])}const I={props:["movements"],setup(e,t){return{}}};var R=a(1432),Y=a(3424);I.render=F;const A=I;H()(I,"components",{QTimeline:R.Z,QTimelineEntry:Y.Z});const K={components:{Movement:A,List:$},setup(){const e=(0,b.iH)(!0),t=(0,h.yj)(),a=(0,h.tv)(),l=(0,U.Z)(),n=(0,b.qj)({notes:[],openHistory:!1,movements:[]}),s=()=>{const e=t.params.id;_.api.get(`applications/${e}/movements`).then((e=>{n.movements=e.data}))},i=e=>{_.api.get(`applications/${e}`).then((e=>{const{regn_no:t,application_code:a,current_step:o,last_step:l,id:s,profile:i}=e.data;n.id=s,n.current_step=o,n.last_step=l,n.regn_no=t,n.application_code=a,n.profile=i})).catch((e=>{var t;let a=null!==e&&void 0!==e&&e.response?null===(t=e.response)||void 0===t?void 0:t.message:e.toString();l.notify({type:"negative",message:a})}))};(0,o.bv)((()=>{const e=t.params.id;_.api.get(`applications/${e}/notes`).then((e=>[n.notes=e.data.list])).catch((e=>{var t;let a=null!==e&&void 0!==e&&e.response?null===(t=e.response)||void 0===t?void 0:t.message:e.toString();l.notify({type:"negative",message:a})})),i(e)}));const r=()=>{const e=t.params.id;_.api.post(`applications/${e}/forward`).then((e=>{const{message:t,list:o,data:n}=e.data;l.notify({type:"positive",message:t}),a.replace({name:"staff:dashboard"})})).catch((e=>{var t;let a=null!==e&&void 0!==e&&e.response?null===(t=e.response)||void 0===t?void 0:t.message:e.toString();l.notify({type:"negative",message:a})}))};return{fetchMovements:s,leftDrawerOpen:e,localData:n,handleForward:r,toggleLeftDrawer(){e.value=!e.value}}}};var T=a(4379),B=a(2165),E=a(6778),O=a(151),P=a(6873);K.render=w;const G=K;H()(K,"components",{QPage:T.Z,QBtn:B.Z,QDialog:E.Z,QCard:O.Z,QDrawer:P.Z})}}]);