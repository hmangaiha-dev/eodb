"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[103],{8103:(e,o,r)=>{r.r(o),r.d(o,{default:()=>W});r(246);var a=r(3673);const l={class:"flex col items-center justify-between"},s=(0,a.Wm)("h1",{class:"ztitle"},"Edit role",-1);function t(e,o,r,t,n,i){const d=(0,a.up)("q-breadcrumbs-el"),u=(0,a.up)("q-breadcrumbs"),m=(0,a.up)("q-input"),p=(0,a.up)("q-select"),c=(0,a.up)("q-btn"),v=(0,a.up)("q-card-actions"),f=(0,a.up)("q-form"),g=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(g,{class:"container-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",l,[s,(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{label:"Roles",to:{name:"role:read"}}),(0,a.Wm)(d,{label:"Edit Role"})])),_:1})]),(0,a.Wm)(f,{class:"column zdetailcard",onReset:t.resetForm,onSubmit:t.handleSubmit},{default:(0,a.w5)((()=>{var e,r,l,s;return[(0,a.Wm)(m,{modelValue:t.formData.name,"onUpdate:modelValue":o[1]||(o[1]=e=>t.formData.name=e),outlined:"",autofocus:"",error:t.localData.errors.hasOwnProperty("name"),"error-message":null===(e=t.localData.errors)||void 0===e||null===(r=e.name)||void 0===r?void 0:r.toString(),onBlur:o[2]||(o[2]=e=>delete t.localData.errors["name"]),rules:[e=>!!e||"Name is required"]},null,8,["modelValue","error","error-message","rules"]),(0,a.Wm)(m,{modelValue:t.formData.description,"onUpdate:modelValue":o[3]||(o[3]=e=>t.formData.description=e),type:"textarea",outlined:"",error:t.localData.errors.hasOwnProperty("description"),"error-message":null===(l=t.localData.errors)||void 0===l||null===(s=l.description)||void 0===s?void 0:s.toString(),onBlur:o[4]||(o[4]=e=>delete t.localData.errors["description"])},null,8,["modelValue","error","error-message"]),(0,a.Wm)(p,{outlined:"","dropdown-icon":"arrow_drop_down",modelValue:t.tempPerms,"onUpdate:modelValue":o[5]||(o[5]=e=>t.tempPerms=e),multiple:"",options:t.permissions,"use-chips":"",label:"Permissions"},null,8,["modelValue","options"]),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{flat:"",color:"primary",type:"submit",label:"Update"}),(0,a.Wm)(c,{flat:"",color:"negative",type:"reset",label:"Reset"})])),_:1})]})),_:1},8,["onReset","onSubmit"])])),_:1})}var n=r(1959),i=r(7874),d=r(5474),u=r(8825),m=r(9582);const p={emits:["onRoleCreated"],setup(e,o){const r=(0,i.oR)(),l=(0,u.Z)(),s=(0,m.yj)(),t=(0,m.tv)(),p=(0,n.qj)({errors:{}}),c=(0,n.iH)([]),v=(0,n.qj)({name:"",description:"",permissions:[]}),f=e=>{v["permissions"]=c.value.map((e=>e.value)),d.api.put(`roles/${v.id}`,v).then((e=>{var o;l.notify({type:"positive",message:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message}),g(),t.go(-1)})).catch((e=>{var o,r,a,s,t,n,i;console.log("error",e.response),null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.errors&&(p.errors=null===(a=e.response.data)||void 0===a?void 0:a.errors),(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)&&l.notify({type:"negative",message:null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message})}))},g=e=>{v.name="",v.description="",v.permissions=[],c.value=[]};return(0,a.bv)((()=>{d.api.get(`roles/${s.params.id}`).then((e=>{const{id:o,name:r,description:a,permissions:l}=e.data;v.id=o,v.name=r,v.description=a,c.value=l})).catch((e=>{var o,r,a,s;(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)&&l.notify({type:"negative",message:null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message})}))})),{permissions:(0,n.Fl)((()=>r.state.staffData.permissions)),localData:p,formData:v,resetForm:g,handleSubmit:f,tempPerms:c}}};var c=r(4379),v=r(1481),f=r(5926),g=r(5269),b=r(4689),y=r(3314),h=r(9367),q=r(2165),w=r(7518),D=r.n(w);p.render=t;const W=p;D()(p,"components",{QPage:c.Z,QBreadcrumbs:v.Z,QBreadcrumbsEl:f.Z,QForm:g.Z,QInput:b.Z,QSelect:y.Z,QCardActions:h.Z,QBtn:q.Z})}}]);