"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[446],{446:(e,a,s)=>{s.r(a),s.d(a,{default:()=>z});var t=s(3673);const o={style:{"max-width":"450px"},class:"zdetailcard row q-col-gutter-sm"},l=(0,t.Wm)("div",{class:"col-xs-12"},[(0,t.Wm)("h1",{class:"ztitle"},"Login")],-1),r=(0,t.Wm)("div",{class:"col-xs-12"},[(0,t.Wm)("p",{class:"text-caption"},"Please enter your staff credential")],-1),i=(0,t.Wm)("div",{class:"col-xs-12"},[(0,t.Wm)("label",{class:"zlabel",for:"email"},"Email")],-1),n={class:"col-xs-12"},d=(0,t.Wm)("div",{class:"col-xs-12"},[(0,t.Wm)("label",{class:"zlabel",for:"password"},"Password")],-1),u={class:"col-xs-12"},c={class:"col-xs-12"};function m(e,a,s,m,p,v){const f=(0,t.up)("q-input"),g=(0,t.up)("q-icon"),w=(0,t.up)("q-btn"),h=(0,t.up)("q-form"),b=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(b,{padding:"",class:"container-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"q-mt-lg flex justify-center",onSubmit:m.submit,onReset:m.reset},{default:(0,t.w5)((()=>[(0,t.Wm)("div",o,[l,r,i,(0,t.Wm)("div",n,[(0,t.Wm)(f,{dense:"",id:"email",outlined:"",modelValue:m.formData.email,"onUpdate:modelValue":a[1]||(a[1]=e=>m.formData.email=e),error:[e=>!!e||"Email is required",e=>m.emailRegex.test(e)||"Invalid email address"]},null,8,["modelValue","error"])]),d,(0,t.Wm)("div",u,[(0,t.Wm)(f,{dense:"",type:m.localData.type,id:"password",outlined:"",modelValue:m.formData.password,"onUpdate:modelValue":a[2]||(a[2]=e=>m.formData.password=e),error:[e=>!!e||"Password is required"]},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"password"===m.localData.type?"visibility_off":"visibility",class:"cursor-pointer",onClick:m.togglePassword},null,8,["name","onClick"])])),_:1},8,["type","modelValue","error"])]),(0,t.Wm)("div",c,[(0,t.Wm)(w,{type:"submit",label:"login","no-caps":"","no-wrap":"",color:"primary"})])])])),_:1},8,["onSubmit","onReset"])])),_:1})}var p=s(1959),v=s(5474),f=s(8825),g=s(7874),w=s(9582);const h=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,b={setup(e,a){const s=(0,f.Z)(),o=(0,g.oR)(),l=(0,w.tv)(),r=(0,p.qj)({type:"password"}),i=(0,p.qj)({email:"",password:""}),n=()=>{"password"===r.type?r.type="text":r.type="password"},d=()=>{v.api.post("auth/staff-login",i).then((e=>{const{token:a,user:s}=e.data;console.log("user",s),console.log(a),o.dispatch("authData/setToken",a),o.dispatch("authData/setCurrentUser",s),v.api.defaults.headers.Authorization=`Bearer ${a}`,setTimeout((()=>{l.push({name:"staff:dashboard"})}),2e3)})).catch((e=>{var a,t,o,l,i,n,d;null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(t=a.data)&&void 0!==t&&t.errors&&(r.errors=null===(o=e.response.data)||void 0===o?void 0:o.errors),(null===e||void 0===e||null===(l=e.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)&&s.notify({type:"negative",message:null===(n=e.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message})}))},u=(0,t.Fl)((()=>o.getters["authData/isAuthenticated"])),c=()=>{};return(0,t.bv)((()=>{})),{isAuthenticated:u,formData:i,localData:r,emailRegex:h,togglePassword:n,submit:d,reset:c}}};var y=s(4379),W=s(5269),x=s(4689),q=s(4554),D=s(2165),k=s(7518),Z=s.n(k);b.render=m;const z=b;Z()(b,"components",{QPage:y.Z,QForm:W.Z,QInput:x.Z,QIcon:q.Z,QBtn:D.Z})}}]);