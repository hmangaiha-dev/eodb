"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[1767],{1767:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});t(7280);var l=t(3673),o=t(2323);const s=(0,l.Wm)("p",{class:"zsubtitle"},"Process flows",-1),n={class:"row q-col-gutter-md"},i={class:"flex justify-between flex-inline col-12"},p={class:"col-12"},d={class:"col-12"},u={class:"flex flex-inline q-gutter-sm"},r={class:"col-12"};function c(e,a,t,c,m,g){const f=(0,l.up)("q-btn"),v=(0,l.up)("q-icon"),h=(0,l.up)("q-input"),w=(0,l.up)("q-separator"),D=(0,l.up)("q-item-label"),_=(0,l.up)("q-item-section"),W=(0,l.up)("q-toggle"),y=(0,l.up)("q-item"),b=(0,l.up)("q-list"),q=(0,l.up)("q-pagination"),k=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(k,{class:"container-lg",padding:""},{default:(0,l.w5)((()=>[s,(0,l.Wm)("div",null,[(0,l.Wm)("div",n,[(0,l.Wm)("div",i,[(0,l.Wm)(f,{to:{name:"process-flows:create"},outline:"",label:"New process flow",color:"primary"}),(0,l.Wm)(h,{modelValue:c.localData.search,"onUpdate:modelValue":a[1]||(a[1]=e=>c.localData.search=e),placeholder:"Search",onKeyup:c.handleSearch,outlined:"",dense:""},{append:(0,l.w5)((()=>[(0,l.Wm)(v,{name:"search"})])),_:1},8,["modelValue","onKeyup"])]),(0,l.Wm)("div",p,[(0,l.Wm)(w)]),(0,l.Wm)("div",d,[(0,l.Wm)(b,{separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(c.localData.listData.data,(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.title),1)])),_:2},1024),(0,l.Wm)(D,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.code),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(_,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",u,[(0,l.Wm)(W,{modelValue:e.published,"onUpdate:modelValue":a=>e.published=a,"left-label":"",onClick:a=>c.publish(e),label:"published?"},null,8,["modelValue","onUpdate:modelValue","onClick"]),(0,l.Wm)(f,{onClick:a=>c.handleDelete(e),size:"12px",outline:"",icon:"delete"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,l.Wm)("div",r,[(0,l.Wm)(q,{"onUpdate:modelValue":[c.updatePagination,a[2]||(a[2]=e=>c.localData.listData.current_page=e)],modelValue:c.localData.listData.current_page,max:c.pageCount,input:""},null,8,["onUpdate:modelValue","modelValue","max"])])])])])),_:1})}var m=t(1959),g=t(954),f=t(5474),v=t(8825),h=t(4224);const w={components:{Edit:h.default,Create:g.default},setup(e,a){const t=(0,v.Z)(),o=(0,m.qj)({openCreate:!1,openEdit:!1,selectedStaff:null,search:"",listData:{per_page:15,data:[],current_page:1,total:1}}),s=e=>{f.api.delete(`application-profiles/process-flows/${e}`).then((e=>{var a;o.listData=e.data.list,t.notify({type:"positive",message:null===(a=e.data)||void 0===a?void 0:a.message})})).catch((e=>{var a,l;t.notify({type:"negative",message:null===e||void 0===e||null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message})}))},n=e=>{o.selectedStaff=e,o.openEdit=!0},i=e=>{t.dialog({title:"Confirm",message:"Would you like to delete?",cancel:!0,persistent:!0}).onOk((()=>{s(e.id)})).onCancel((()=>{})).onDismiss((()=>{}))},p=e=>{o.search=e.target.value,13===e.keyCode&&r(1)},d=e=>{r(e)},u=e=>{f.api.put(`application-profiles/${e.id}/toggle`).then((e=>{var a;const{current_page:l,total:s,per_page:n,data:i}=e.data.list;o.listData.current_page=l,o.listData.data=i,o.listData.total=s,t.notify({type:"positive",message:null===(a=e.data)||void 0===a?void 0:a.message})})).catch((e=>{var a;let l=null!==e&&void 0!==e&&e.response?null===(a=e.response)||void 0===a?void 0:a.message:e.toString();t.notify({type:"negative",message:l})}))},r=e=>{f.api.get(`application-profiles/flows?page=${e}`,{params:{search:o.search}}).then((e=>{const{current_page:a,total:t,per_page:l,data:s}=e.data.list;o.listData.current_page=a,o.listData.data=s,o.listData.total=t,o.listData.per_page=l})).catch((e=>{var a;let l=null!==e&&void 0!==e&&e.response?null===(a=e.response)||void 0===a?void 0:a.message:e.toString();t.notify({type:"negative",message:l})}))};return(0,l.bv)((()=>r(o.listData.page))),{updatePagination:d,pageCount:(0,m.Fl)((()=>Math.ceil(o.listData.total/o.listData.per_page))),deleteFlow:s,localData:o,handleSearch:p,handleEdit:n,publish:u,handleDelete:i}}};var D=t(4379),_=t(2165),W=t(4689),y=t(4554),b=t(5869),q=t(7011),k=t(3414),C=t(2035),Z=t(2350),Q=t(8886),V=t(7300),S=t(7518),x=t.n(S);w.render=c;const U=w;x()(w,"components",{QPage:D.Z,QBtn:_.Z,QInput:W.Z,QIcon:y.Z,QSeparator:b.Z,QList:q.Z,QItem:k.Z,QItemSection:C.Z,QItemLabel:Z.Z,QToggle:Q.Z,QPagination:V.Z})}}]);