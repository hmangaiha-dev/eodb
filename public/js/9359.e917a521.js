"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[9359],{9359:(a,e,n)=>{n.r(e),n.d(e,{default:()=>W});n(7280);var o=n(3673),l=n(2323);const t=(0,o.Wm)("h1",{class:"ztitle"},"Staff posting",-1),s={class:"col-xs-12"},i={class:"zlabel"};function r(a,e,n,r,d,p){const c=(0,o.up)("q-btn"),u=(0,o.up)("q-space"),g=(0,o.up)("q-icon"),m=(0,o.up)("q-input"),f=(0,o.up)("q-td"),w=(0,o.up)("q-badge"),b=(0,o.up)("q-table"),v=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(v,{class:"container-lg  q-my-md",padding:""},{default:(0,o.w5)((()=>[t,(0,o.Wm)("div",s,[(0,o.Wm)(b,{title:"Staff posting",pagination:r.tableData.pagination,"onUpdate:pagination":e[2]||(e[2]=a=>r.tableData.pagination=a),loading:r.localData.loading,onRequest:r.onRequest,"card-class":"zcard",rows:r.tableData.data,columns:r.columns,"row-key":"fullname","binary-state-sort":"","rows-per-page-options":[7,15,30,50]},{top:(0,o.w5)((()=>[(0,o.Wm)(c,{to:{name:"posting:create"},outline:"",color:"primary",label:"New Posting"}),(0,o.Wm)(u),(0,o.Wm)(m,{outlined:"",dense:"",modelValue:r.localData.search,"onUpdate:modelValue":e[1]||(e[1]=a=>r.localData.search=a),onChange:r.handleSearch,placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"search"})])),_:1},8,["modelValue","onChange"])])),"body-cell-current_post":(0,o.w5)((a=>[(0,o.Wm)(f,{props:a},{default:(0,o.w5)((()=>{var e,n;return[(0,o.Wm)("p",i,(0,l.zw)(null===(e=a.row.current_post)||void 0===e?void 0:e.code)+" : "+(0,l.zw)(null===(n=a.row.current_post)||void 0===n?void 0:n.name),1)]})),_:2},1032,["props"])])),"body-cell-roles":(0,o.w5)((a=>[(0,o.Wm)(f,{props:a},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(a.row.roles,(a=>((0,o.wg)(),(0,o.j4)(w,{key:a.id,label:a.name},null,8,["label"])))),128))])),_:2},1032,["props"])])),_:1},8,["pagination","loading","onRequest","rows","columns"])])])),_:1})}n(9544);var d=n(1959),p=n(5474),c=n(8825);const u=[{name:"fullname",align:"left",label:"Fullname",field:"full_name",sortable:!0},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"roles",align:"left",label:"Roles",field:"roles"},{name:"current_post",align:"center",label:"Post",field:"current_post"}],g={setup(){const a=(0,c.Z)(),e=(0,d.qj)({loading:!1,search:""}),n=(0,d.qj)({data:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}}),l=a=>{t(n)},t=o=>{const{page:l,rowsPerPage:t,sortBy:s,descending:i}=o.pagination;e.loading=!0,p.api.get("posting/index",{params:{page:l,rowsPerPage:t,sortBy:s,descending:i,search:e.search}}).then((a=>{const{current_page:e,per_page:o,data:l,to:t,total:s}=a.data.data;n.data=l,n.pagination.rowsNumber=s,n.pagination.page=e,n.pagination.rowsPerPage=o,console.log(a.data)})).catch((e=>{var n,o,l,t;(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)&&a.notify({type:"negative",message:null===(l=e.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message})})).finally((()=>e.loading=!1))};return(0,o.bv)((()=>{t({pagination:n.pagination,filter:void 0})})),{onRequest:t,visibleColumns:(0,d.iH)(["staff","office","designation","role","joined_at","status"]),columns:u,tableData:n,localData:e,handleSearch:l}}};var m=n(4379),f=n(6023),w=n(2165),b=n(2025),v=n(4689),h=n(4554),q=n(3884),_=n(9721),y=n(7518),P=n.n(y);g.render=r;const W=g;P()(g,"components",{QPage:m.Z,QTable:f.Z,QBtn:w.Z,QSpace:b.Z,QInput:v.Z,QIcon:h.Z,QTd:q.Z,QBadge:_.Z})}}]);