"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[2612],{2612:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var o=a(3673),s=a(2323);const l={class:"flex justify-between"},n={class:"zlabel"},i=(0,o.Wm)("p",{class:"zlabel"},"Body",-1),r={class:"q-pa-md"};function m(e,t,a,m,d,p){const c=(0,o.up)("q-btn"),u=(0,o.up)("q-input"),f=(0,o.up)("q-editor"),b=(0,o.up)("q-form");return(0,o.wg)(),(0,o.j4)(b,{onSubmit:m.submit,class:" column  q-gutter-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",l,[(0,o.Wm)("p",n,(0,s.zw)(m.formData.title),1),(0,o.Wm)(c,{onClick:m.handleDelete,disable:e.$store.state.authData.currentUser.id!==m.formData.staff_id,flat:"",color:"negative",label:"Delete","no-caps":""},null,8,["onClick","disable"])]),(0,o.Wm)(u,{outlined:"",dense:"",modelValue:m.formData.title,"onUpdate:modelValue":t[1]||(t[1]=e=>m.formData.title=e)},null,8,["modelValue"]),i,(0,o.Wm)(f,{modelValue:m.formData.body,"onUpdate:modelValue":t[2]||(t[2]=e=>m.formData.body=e),flat:"","content-class":"bg-amber-3","toolbar-text-color":"white","toolbar-toggle-color":"yellow-8","toolbar-bg":"primary",toolbar:[["bold","italic","underline"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h3","h4","h5","h6","code"]}]]},null,8,["modelValue","toolbar"]),(0,o.Wm)("div",r,[(0,o.Wm)(c,{disable:e.$store.state.authData.currentUser.id!==m.formData.staff_id,type:"submit",color:"primary",label:"Update",outline:""},null,8,["disable"]),(0,o.Wm)(c,{type:"reset",class:"q-ml-lg",color:"negative",outline:"",label:"clear"})])])),_:1},8,["onSubmit"])}a(7280),a(5363);var d=a(1959),p=a(5474),c=a(9582),u=a(8825);const f={emits:["notes"],setup(e,t){const a=(0,c.yj)(),s=(0,c.tv)(),l=(0,u.Z)(),n=(0,d.qj)({title:"",body:""}),i=()=>{const e=a.params.id,t=a.params.note;p.api.get(`applications/${e}/notes/${t}`).then((e=>{console.log(e.data);const{title:t,body:a,staff_id:o,id:s}=e.data;n.staff_id=o,n.title=t,n.body=a})).catch((e=>{var t;let a=null!==e&&void 0!==e&&e.response?null===(t=e.response)||void 0===t?void 0:t.message:e.toString();l.notify({type:"negative",message:a})}))},r=e=>{const o=a.params.id,s=a.params.note;p.api.put(`applications/${o}/notes/${s}`,n).then((e=>{const{message:a,list:o,data:s}=e.data;l.notify({type:"positive",message:a}),t.emit("notes",o)})).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||"Something wrong";l.notify({type:"negative",message:a})}))},m=()=>{const e=a.params.id,o=a.params.note;p.api.delete(`applications/${e}/notes/${o}`).then((a=>{const{message:o,list:n,data:i}=a.data;l.notify({type:"positive",message:o}),t.emit("notes",n),s.replace({name:"note:create",params:{id:e}})})).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||"Something wrong";l.notify({type:"negative",message:a})}))};return(0,o.bv)((()=>i())),(0,o.YP)((()=>a.params.note),((e,t)=>{e&&a.params.note&&e!==t&&i()}),{immediate:!0}),{formData:n,submit:r,handleDelete:m}}};var b=a(5269),g=a(2165),v=a(4689),y=a(239),h=a(7518),D=a.n(h);f.render=m;const q=f;D()(f,"components",{QForm:b.Z,QBtn:g.Z,QInput:v.Z,QEditor:y.Z})}}]);