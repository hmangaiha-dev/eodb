"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[2826],{2826:(a,e,t)=>{t.r(e),t.d(e,{default:()=>x});var l=t(3673),n=t(2323);const o={class:"row"},c={class:"col-xs-12 ztitle"},i={class:"row q-col-gutter-xs q-ma-lg"},s={class:"col-6 zvalue"};function m(a,e,t,m,d,p){const u=(0,l.up)("q-card"),r=(0,l.up)("q-dialog"),g=(0,l.up)("Attachments"),v=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(v,{padding:""},{default:(0,l.w5)((()=>{var a;return[(0,l.Wm)(r,{modelValue:m.dialog,"onUpdate:modelValue":e[1]||(e[1]=a=>m.dialog=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)("embed",{src:m.attachment,width:"500",height:"500"},null,8,["src"])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)("div",o,[(0,l.Wm)("div",c,(0,n.zw)(null===(a=m.localData.application)||void 0===a?void 0:a.application_name),1)]),(0,l.Wm)("div",i,[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(m.localData.fields,((a,e)=>((0,l.wg)(),(0,l.j4)("div",{class:[[null!=a.field_value?"q-ml-md":""],"col-12 row"],key:e},[(0,l.Wm)("div",{class:[null==a.field_value?"col-12 nofield":"col-6 zlabel"]},(0,n.zw)(a.field_label),3),(0,l.Wm)("div",s,(0,n.zw)(a.field_value),1)],2)))),128))]),(0,l.Wm)(g,{attachments:m.localData.attachments},null,8,["attachments"])]})),_:1})}var d=t(5474),p=t(8825),u=t(1959),r=t(9582);const g={class:"row"},v=(0,l.Wm)("div",{class:"col-12 zsubtitle"},"Document upload",-1),f={class:"zlabel q-ma-none q-pa-none"},h={class:"text-caption q-ma-none q-pa-none"};function w(a,e,t,o,c,i){const s=(0,l.up)("q-icon"),m=(0,l.up)("q-item-section"),d=(0,l.up)("q-item-label"),p=(0,l.up)("q-btn"),u=(0,l.up)("q-item"),r=(0,l.up)("q-img"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.Wm)("div",g,[v,((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.$props.attachments,(a=>((0,l.wg)(),(0,l.j4)("div",{class:"col-12 zdetailcard q-pa-md q-ma-md",key:a.key},[(0,l.Wm)(u,{class:"flex"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{avatar:""},{default:(0,l.w5)((()=>["application/pdf"===a.mime?((0,l.wg)(),(0,l.j4)(s,{key:0,color:"grey",name:"picture_as_pdf"})):((0,l.wg)(),(0,l.j4)(s,{key:1,color:"grey",name:"image"}))])),_:2},1024),(0,l.Wm)(d,{style:{flex:"1"}},{default:(0,l.w5)((()=>[(0,l.Wm)("p",f,(0,n.zw)(null===a||void 0===a?void 0:a.label),1),(0,l.Wm)("p",h,(0,n.zw)(null===a||void 0===a?void 0:a.original_name),1)])),_:2},1024),(0,l.Wm)(m,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{label:"Open",outline:"",onClick:e=>o.openAttachment(a)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,l.Wm)(w,{modelValue:o.localState.openImage,"onUpdate:modelValue":e[1]||(e[1]=a=>o.localState.openImage=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{src:o.localState.selectedAttachment.full_path},null,8,["src"])])),_:1},8,["modelValue"]),(0,l.Wm)(w,{modelValue:o.localState.openPdf,"onUpdate:modelValue":e[2]||(e[2]=a=>o.localState.openPdf=a)},null,8,["modelValue"])],64)}const _={props:["attachments"],setup(a,e){const t=(0,u.qj)({openImage:!1,openPdf:!1,selectedAttachment:null}),l=a=>{t.selectedAttachment=a,console.log(a),"application/pdf"===(null===a||void 0===a?void 0:a.mime)?t.openPdf=!0:t.openImage=!0};return{localState:t,openAttachment:l}}};var q=t(3414),W=t(2035),b=t(4554),Z=t(2350),Q=t(2165),j=t(6778),k=t(4027),y=t(7518),z=t.n(y);_.render=w;const I=_;z()(_,"components",{QItem:q.Z,QItemSection:W.Z,QIcon:b.Z,QItemLabel:Z.Z,QBtn:Q.Z,QDialog:j.Z,QImg:k.Z});const S={components:{Attachments:I},setup(a,e){const t=(0,r.yj)(),n=(0,p.Z)(),o=(0,u.iH)(!1),c=(0,u.iH)(""),i=(0,u.qj)({application:{},fields:[],actions:[],attachments:[]});return(0,l.bv)((()=>{const a=t.params.id;d.api.get(`applications/${a}`).then((a=>{const{application_code:e,application_values:t,application_name:l,regn_no:n,current_state:o,attachments:c}=a.data.data;i.actions=a.data.actions,i.application.regn_no=n,i.application.application_code=e,i.application.application_name=l,i.application.current_state=o,i.fields=t,i.attachments=c})).catch((a=>{var e;let t=(null===(e=a.response)||void 0===e?void 0:e.message)||"Something wrong";n.notify({type:"negative",message:t})}))})),{localData:i,dialog:o,attachment:c,getFile:a=>{c.value="http://localhost:8000/storage/"+a,o.value=!0,console.log("attachment",c.value)}}}};var V=t(4379),A=t(151),D=t(5869);S.render=m;const x=S;z()(S,"components",{QPage:V.Z,QDialog:j.Z,QCard:A.Z,QBtn:Q.Z,QSeparator:D.Z})}}]);