"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[5167],{5167:(a,e,o)=>{o.r(e),o.d(e,{default:()=>B});o(7280);var n=o(3673);const t={class:"row "},l={class:"col-xs-12"},i=(0,n.Uk)("View Application"),s=(0,n.Uk)("Movement History ");function d(a,e,o,d,r,p){const c=(0,n.up)("q-icon"),m=(0,n.up)("q-input"),u=(0,n.up)("q-item-label"),g=(0,n.up)("q-item-section"),v=(0,n.up)("q-item"),w=(0,n.up)("q-list"),f=(0,n.up)("q-btn-dropdown"),b=(0,n.up)("q-td"),_=(0,n.up)("q-table"),h=(0,n.up)("movement"),q=(0,n.up)("q-card-section"),y=(0,n.up)("q-btn"),W=(0,n.up)("q-card-actions"),Z=(0,n.up)("q-card"),D=(0,n.up)("q-dialog"),Q=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(Q,{class:"container-lg zcard q-my-md",padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)("div",t,[(0,n.Wm)("div",l,[(0,n.Wm)(_,{pagination:d.tableData.pagination,"onUpdate:pagination":e[2]||(e[2]=a=>d.tableData.pagination=a),loading:d.localData.loading,onRequest:d.onRequest,flat:"",title:"Ongoing Applications",rows:d.tableData.data,columns:d.columns,"row-key":"fullname","binary-state-sort":"","rows-per-page-options":[7,15,30,50]},{"top-right":(0,n.w5)((()=>[(0,n.Wm)(m,{outlined:"",dense:"",modelValue:d.localData.search,"onUpdate:modelValue":e[1]||(e[1]=a=>d.localData.search=a),onChange:d.handleSearch,placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(c,{name:"search"})])),_:1},8,["modelValue","onChange"])])),"body-cell-action":(0,n.w5)((a=>[(0,n.Wm)(b,{props:a},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{rounded:"","dropdown-icon":"arrow_drop_down","no-caps":"",label:"Action",outline:"",color:"primary"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{separator:""},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{onClick:e=>d.viewApplication(a.row.id),clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[i])),_:1})])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(v,{onClick:e=>d.movementHistory(a.row.id),clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[s])),_:1})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["pagination","loading","onRequest","rows","columns"])])]),(0,n.Wm)(D,{modelValue:d.localData.openMovementHistory,"onUpdate:modelValue":e[4]||(e[4]=a=>d.localData.openMovementHistory=a)},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(q,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{movements:d.localData.movements},null,8,["movements"])])),_:1}),(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{outline:"",color:"negative",label:"Close",onClick:e[3]||(e[3]=a=>d.localData.openMovementHistory=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}o(9544);var r=o(5474),p=o(1959),c=o(5616),m=o(8825),u=o(9582),g=o(2215);const v=[{name:"application_name",align:"left",label:"Application",field:"application_name",sortable:!0},{name:"regn_no",align:"left",label:"Registration No",field:"regn_no",sortable:!0},{name:"created_at",align:"left",label:"Submitted At",field:"created_at",format:a=>c.ZP.formatDate(a,"DD-MMYYYY hh:mm a")},{name:"action",align:"center",label:"Action",field:"id"}],w={components:{Movement:g.Z},setup(){const a=(0,m.Z)(),e=(0,u.tv)(),o=((0,u.yj)(),(0,p.qj)({loading:!1,openMovementHistory:!1,movements:[],search:""})),t=(0,p.qj)({data:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}}),l=a=>{i(t)},i=e=>{const{page:n,rowsPerPage:l,sortBy:i,descending:s}=e.pagination;o.loading=!0,r.api.get("office/applications/ongoing",{params:{page:n,rowsPerPage:l,sortBy:i,descending:s,search:o.search}}).then((a=>{const{current_page:e,per_page:o,data:n,to:l,total:i}=a.data;t.data=n,t.pagination.rowsNumber=i,t.pagination.page=e,t.pagination.rowsPerPage=o,console.log(a.data)})).catch((e=>{var o,n,t,l;(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)&&a.notify({type:"negative",message:null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message})})).finally((()=>o.loading=!1))};(0,n.bv)((()=>{i({pagination:t.pagination,filter:void 0})}));const s=a=>{e.push({name:"ongoing-applications:detail",params:{id:a}})},d=e=>{console.info(e),r.api.get(`applications/${e}/movements`).then((a=>{o.movements=a.data,o.openMovementHistory=!o.openMovementHistory})).catch((e=>{var o;a.notify({type:"negative",message:(null===e||void 0===e||null===(o=e.response)||void 0===o?void 0:o.message)||e.toString()})}))};return{onRequest:i,columns:v,tableData:t,localData:o,handleSearch:l,viewApplication:s,movementHistory:d}}};var f=o(4379),b=o(6023),_=o(4689),h=o(4554),q=o(3884),y=o(2670),W=o(7011),Z=o(3414),D=o(2035),Q=o(2350),k=o(9721),C=o(6778),M=o(151),P=o(5589),A=o(9367),H=o(2165),S=o(7518),V=o.n(S);w.render=d;const B=w;V()(w,"components",{QPage:f.Z,QTable:b.Z,QInput:_.Z,QIcon:h.Z,QTd:q.Z,QBtnDropdown:y.Z,QList:W.Z,QItem:Z.Z,QItemSection:D.Z,QItemLabel:Q.Z,QBadge:k.Z,QDialog:C.Z,QCard:M.Z,QCardSection:P.Z,QCardActions:A.Z,QBtn:H.Z})}}]);