"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[5338],{5338:(e,r,o)=>{o.r(r),o.d(r,{default:()=>y});o(246);var a=o(3673);const l={class:"flex flex-inline items-center"},s=(0,a.Wm)("h1",{class:"ztitle"},"New role",-1);function t(e,r,o,t,n,i){const m=(0,a.up)("q-space"),u=(0,a.up)("q-breadcrumbs-el"),d=(0,a.up)("q-breadcrumbs"),p=(0,a.up)("q-input"),c=(0,a.up)("q-select"),v=(0,a.up)("q-btn"),f=(0,a.up)("q-card-actions"),g=(0,a.up)("q-form"),b=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(b,{class:"container-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",l,[s,(0,a.Wm)(m),(0,a.Wm)(d,{align:"right",gutter:"xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{to:{name:"role:read"},label:"Roles"}),(0,a.Wm)(u,{label:"New role"})])),_:1})]),(0,a.Wm)(g,{class:"column zdetailcard",ref:"formRef",onReset:t.resetForm,onSubmit:t.handleSubmit},{default:(0,a.w5)((()=>{var e,o,l,s;return[(0,a.Wm)(p,{modelValue:t.formData.name,"onUpdate:modelValue":r[1]||(r[1]=e=>t.formData.name=e),outlined:"",autofocus:"","item-aligned":"",label:"Full name",error:t.localData.errors.hasOwnProperty("name"),"error-message":null===(e=t.localData.errors)||void 0===e||null===(o=e.name)||void 0===o?void 0:o.toString(),onBlur:r[2]||(r[2]=e=>delete t.localData.errors["name"]),rules:[e=>!!e||"Name is required"]},null,8,["modelValue","error","error-message","rules"]),(0,a.Wm)(p,{modelValue:t.formData.description,"onUpdate:modelValue":r[3]||(r[3]=e=>t.formData.description=e),type:"textarea",label:"Description","item-aligned":"",outlined:"",error:t.localData.errors.hasOwnProperty("description"),"error-message":null===(l=t.localData.errors)||void 0===l||null===(s=l.description)||void 0===s?void 0:s.toString(),onBlur:r[4]||(r[4]=e=>delete t.localData.errors["description"])},null,8,["modelValue","error","error-message"]),(0,a.Wm)(c,{outlined:"","item-aligned":"","dropdown-icon":"arrow_drop_down",modelValue:t.tempPerms,"onUpdate:modelValue":r[5]||(r[5]=e=>t.tempPerms=e),multiple:"",options:t.permissions,"use-chips":"",label:"Permissions"},null,8,["modelValue","options"]),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{flat:"",color:"primary",type:"submit",label:"Save"}),(0,a.Wm)(v,{flat:"",color:"negative",type:"reset",label:"Reset"})])),_:1})]})),_:1},8,["onReset","onSubmit"])])),_:1})}var n=o(1959),i=o(7874),m=o(5474),u=o(8825);const d={emits:["onRoleCreated"],setup(e,r){const o=(0,i.oR)(),a=(0,u.Z)(),l=(0,n.iH)(null),s=(0,n.qj)({errors:{}}),t=(0,n.iH)([]),d=(0,n.qj)({name:"",description:"",permissions:[]}),p=e=>{d["permissions"]=t.value.map((e=>e.value)),m.api.post("roles",d).then((r=>{var o;a.notify({type:"positive",message:null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message}),e.target.reset()})).catch((e=>{var r,o,l,t,n,i,m;console.log("error",e.response),null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&o.errors&&(s.errors=null===(l=e.response.data)||void 0===l?void 0:l.errors),(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)&&a.notify({type:"negative",message:null===(i=e.response)||void 0===i||null===(m=i.data)||void 0===m?void 0:m.message})}))},c=e=>{d.name="",d.description="",d.permissions=[],t.value=[]};return{permissions:(0,n.Fl)((()=>o.state.staffData.permissions)),localData:s,formData:d,resetForm:c,handleSubmit:p,tempPerms:t,formRef:l}}};var p=o(4379),c=o(2025),v=o(1481),f=o(5926),g=o(5269),b=o(4689),q=o(2448),w=o(9367),D=o(2165),W=o(7518),h=o.n(W);d.render=t;const y=d;h()(d,"components",{QPage:p.Z,QSpace:c.Z,QBreadcrumbs:v.Z,QBreadcrumbsEl:f.Z,QForm:g.Z,QInput:b.Z,QSelect:q.Z,QCardActions:w.Z,QBtn:D.Z})}}]);