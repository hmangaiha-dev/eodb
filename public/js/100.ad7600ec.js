"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[100],{2100:(e,a,t)=>{t.r(a),t.d(a,{default:()=>z});t(7280);var l=t(3673),n=t(2323);const o=(0,l.Wm)("p",{class:"zsubtitle"},"Process flows",-1),i={class:"row q-col-gutter-md"},s={class:"flex justify-between flex-inline col-12"},d={class:"col-12"},u={class:"col-12"},p={class:"text-caption"},c={class:"flex flex-inline q-gutter-sm"},r={class:"col-12"};function m(e,a,t,m,f,g){const v=(0,l.up)("q-btn"),h=(0,l.up)("q-icon"),D=(0,l.up)("q-input"),w=(0,l.up)("q-separator"),W=(0,l.up)("q-item-label"),_=(0,l.up)("q-item-section"),q=(0,l.up)("q-item"),C=(0,l.up)("q-list"),k=(0,l.up)("q-pagination"),y=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(y,{class:"container-lg",padding:""},{default:(0,l.w5)((()=>[o,(0,l.Wm)("div",null,[(0,l.Wm)("div",i,[(0,l.Wm)("div",s,[(0,l.Wm)(v,{to:{name:"process-flows:create"},outline:"",label:"New process flow",color:"primary"}),(0,l.Wm)(D,{modelValue:m.localData.search,"onUpdate:modelValue":a[1]||(a[1]=e=>m.localData.search=e),placeholder:"Search",onKeyup:m.handleSearch,outlined:"",dense:""},{append:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"search"})])),_:1},8,["modelValue","onKeyup"])]),(0,l.Wm)("div",d,[(0,l.Wm)(w)]),(0,l.Wm)("div",u,[(0,l.Wm)(C,{separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(m.localData.listData.data,(e=>((0,l.wg)(),(0,l.j4)(q,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.full_name)+" : ",1),(0,l.Wm)("span",p,(0,n.zw)(null===e||void 0===e?void 0:e.email),1)])),_:2},1024),(0,l.Wm)(W,{caption:""},{default:(0,l.w5)((()=>{var a;return[(0,l.Uk)((0,n.zw)(null===e||void 0===e||null===(a=e.rolesName)||void 0===a?void 0:a.toString()),1)]})),_:2},1024)])),_:2},1024),(0,l.Wm)(_,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)("div",c,[(0,l.Wm)(v,{onClick:a=>m.handleEdit(e),size:"12px",outline:"",icon:"edit"},null,8,["onClick"]),(0,l.Wm)(v,{onClick:a=>m.handleDelete(e),size:"12px",outline:"",icon:"delete"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,l.Wm)("div",r,[(0,l.Wm)(k,{"onUpdate:modelValue":[m.updatePagination,a[2]||(a[2]=e=>m.localData.listData.current_page=e)],modelValue:m.localData.listData.current_page,max:m.pageCount,input:""},null,8,["onUpdate:modelValue","modelValue","max"])])])])])),_:1})}var f=t(1959),g=t(954),v=t(5474),h=t(8825),D=t(4224);const w={components:{Edit:D.default,Create:g.default},setup(e,a){const t=(0,h.Z)(),n=(0,f.qj)({openCreate:!1,openEdit:!1,selectedStaff:null,search:"",listData:{per_page:15,data:[],current_page:1,total:1}}),o=e=>{n.openCreate=!1,n.listData=e},i=e=>{n.openEdit=!1,n.listData=e},s=e=>{v.api.delete(`staff/${e}`).then((e=>{var a;n.listData=e.data.list,t.notify({type:"positive",message:null===(a=e.data)||void 0===a?void 0:a.message})})).catch((e=>{var a,l;t.notify({type:"negative",message:null===e||void 0===e||null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message})}))},d=e=>{n.selectedStaff=e,n.openEdit=!0},u=e=>{t.dialog({title:"Confirm",message:"Would you like to delete?",cancel:!0,persistent:!0}).onOk((()=>{s(e.id)})).onCancel((()=>{})).onDismiss((()=>{}))},p=e=>{n.search=e.target.value,13===e.keyCode&&r(1)},c=e=>{r(e)},r=e=>{v.api.get(`staff/index?page=${e}`,{params:{search:n.search}}).then((e=>{console.log(e.data);const{current_page:a,total:t,per_page:l,data:o}=e.data.data;n.listData.current_page=a,n.listData.data=o,n.listData.total=t,n.listData.per_page=l})).catch((e=>{var a;let l=null!==e&&void 0!==e&&e.response?null===(a=e.response)||void 0===a?void 0:a.message:e.toString();t.notify({type:"negative",message:l})}))};return(0,l.bv)((()=>r(n.listData.page))),{updatePagination:c,pageCount:(0,f.Fl)((()=>Math.ceil(n.listData.total/n.listData.per_page))),deleteStaff:s,localData:n,onStaffCreated:o,onStaffUpdated:i,handleSearch:p,handleEdit:d,handleDelete:u}}};var W=t(4379),_=t(2165),q=t(4689),C=t(4554),k=t(5869),y=t(7011),S=t(3414),Z=t(2035),x=t(2350),Q=t(7300),b=t(7518),V=t.n(b);w.render=m;const z=w;V()(w,"components",{QPage:W.Z,QBtn:_.Z,QInput:q.Z,QIcon:C.Z,QSeparator:k.Z,QList:y.Z,QItem:S.Z,QItemSection:Z.Z,QItemLabel:x.Z,QPagination:Q.Z})}}]);