"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[5720],{5720:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var l=a(3673);const n=(0,l.Wm)("br",null,null,-1),o=(0,l.Wm)("br",null,null,-1),c={class:"col-12"},s=(0,l.Wm)("br",null,null,-1);function i(e,t,a,i,p,m){const u=(0,l.up)("q-card"),d=(0,l.up)("q-dialog"),r=(0,l.up)("q-separator"),g=(0,l.up)("q-btn"),h=(0,l.up)("Attachments"),v=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.Wm)("div",{class:"print-only",innerHTML:i.localData.template},null,8,["innerHTML"]),(0,l.Wm)(v,{padding:"",class:"container-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"print-hide",modelValue:i.dialog,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)("embed",{src:i.attachment,width:"500",height:"500"},null,8,["src"])])),_:1})])),_:1},8,["modelValue"]),n,(0,l.Wm)("div",{innerHTML:i.localData.template},null,8,["innerHTML"]),o,(0,l.Wm)(r,{class:"q-my-md print-hide"}),(0,l.Wm)("div",c,[(0,l.Wm)(g,{onClick:i.printApplication,label:"Print",outline:"",class:"print-hide"},null,8,["onClick"])]),s,(0,l.Wm)(h,{class:"print-hide",attachments:i.localData.attachments},null,8,["attachments"])])),_:1})],64)}var p=a(1959),m=a(5474),u=a(8825),d=a(9582),r=a(2323);const g={class:"row"},h=(0,l.Wm)("div",{class:"col-12 zsubtitle"},"Document upload",-1),v={class:"col-xs-12"},f={class:"zlabel q-ma-none q-pa-none"},W={class:"text-caption q-ma-none q-pa-none"};function q(e,t,a,n,o,c){const s=(0,l.up)("q-separator"),i=(0,l.up)("q-icon"),p=(0,l.up)("q-item-section"),m=(0,l.up)("q-item-label"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-item"),q=(0,l.up)("q-img"),w=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(l.HY,null,[(0,l.Wm)("div",g,[h,(0,l.Wm)("div",v,[(0,l.Wm)(s,{class:"q-my-md"})]),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.$props.attachments,(e=>((0,l.wg)(),(0,l.j4)("div",{class:"col-12 zdetailcard q-pa-none q-ma-none",key:e.key},[(0,l.Wm)(d,{class:"flex"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{avatar:""},{default:(0,l.w5)((()=>["application/pdf"===e.mime?((0,l.wg)(),(0,l.j4)(i,{key:0,color:"grey",name:"picture_as_pdf"})):((0,l.wg)(),(0,l.j4)(i,{key:1,color:"grey",name:"image"}))])),_:2},1024),(0,l.Wm)(m,{style:{flex:"1"}},{default:(0,l.w5)((()=>[(0,l.Wm)("p",f,(0,r.zw)(null===e||void 0===e?void 0:e.label),1),(0,l.Wm)("p",W,(0,r.zw)(null===e||void 0===e?void 0:e.original_name),1)])),_:2},1024),(0,l.Wm)(p,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"Open",outline:"",onClick:t=>n.openAttachment(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])))),128))]),(0,l.Wm)(w,{modelValue:n.localState.openImage,"onUpdate:modelValue":t[1]||(t[1]=e=>n.localState.openImage=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{src:n.localState.selectedAttachment.full_path},null,8,["src"])])),_:1},8,["modelValue"]),(0,l.Wm)(w,{modelValue:n.localState.openPdf,"onUpdate:modelValue":t[2]||(t[2]=e=>n.localState.openPdf=e)},null,8,["modelValue"])],64)}const w={props:["attachments"],setup(e,t){const a=(0,p.qj)({openImage:!1,openPdf:!1,selectedAttachment:null}),l=e=>{a.selectedAttachment=e,console.log(e),"application/pdf"===(null===e||void 0===e?void 0:e.mime)?a.openPdf=!0:a.openImage=!0};return{localState:a,openAttachment:l}}};var b=a(5869),y=a(3414),Z=a(2035),_=a(4554),Q=a(2350),k=a(2165),j=a(6778),A=a(4027),H=a(7518),I=a.n(H);w.render=q;const S=w;I()(w,"components",{QSeparator:b.Z,QItem:y.Z,QItemSection:Z.Z,QIcon:_.Z,QItemLabel:Q.Z,QBtn:k.Z,QDialog:j.Z,QImg:A.Z});const V={components:{Attachments:S},setup(e,t){const a=(0,d.yj)(),n=(0,u.Z)(),o=(0,p.iH)(!1),c=(0,p.iH)(""),s=(0,p.qj)({application:{},template:"test",attachments:[]}),i=e=>{m.api.get(`applications/${e}/print`).then((e=>{const{template:t,application:a}=e.data;s.template=t,s.application=a})).catch((e=>{var t;return n.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||""})}))},r=e=>{m.api.get(`applications/${e}/attachments`).then((e=>{const{list:t}=e.data;s.attachments=t})).catch((e=>{var t;return n.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||""})}))};return(0,l.bv)((()=>{const e=a.params.id;i(e),r(e)})),{localData:s,dialog:o,attachment:c,printApplication:()=>window.print(),getFile:e=>{c.value="http://localhost:8000/storage/"+e,o.value=!0,console.log("attachment",c.value)}}}};var C=a(4379),D=a(151);V.render=i;const P=V;I()(V,"components",{QPage:C.Z,QDialog:j.Z,QCard:D.Z,QSeparator:b.Z,QBtn:k.Z})}}]);