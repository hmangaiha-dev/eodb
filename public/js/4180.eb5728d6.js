"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[4180],{4180:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Qe});var o=a(3673),l=a(2323);const s={class:"col-sm-3 bg-grey-1 print-hide"},n={class:"col-sm-9 column q-gutter-md"},i={class:"zcard q-mt-sm rounded-borders q-pa-md flex justify-between"},r={class:"flex flex-inline q-gutter-sm"},c={class:"zcard bg-grey-1 q-py-md row"},m={class:"col-9 print-hide"},d={class:"zlabel"},p=(0,o.Uk)("Application : "),u={class:"zvalue"},f={class:"zlabel"},v=(0,o.Uk)("Regn No : "),g={class:"zvalue"},b={class:"zlabel"},w=(0,o.Uk)("Submitted At : "),h={class:"zvalue"},W={class:"col-3 flex justify-end print-hide"},y={class:"col-12 zdetailcard  q-my-md print-hide"},q={class:"col-12 zdetailcard q-my-md"};function k(e,t,a,k,S,_){const Z=(0,o.up)("List"),D=(0,o.up)("q-btn"),C=(0,o.up)("certificates"),Q=(0,o.up)("router-view"),U=(0,o.up)("movement"),x=(0,o.up)("q-drawer"),V=(0,o.up)("create-state"),z=(0,o.up)("q-dialog"),j=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(j,{class:"row q-col-gutter-md q-ma-none container-lg"},{default:(0,o.w5)((()=>{var a,S,_;return[(0,o.Wm)("div",s,[(0,o.Wm)(Z,{notes:k.localData.notes},null,8,["notes"])]),(0,o.Wm)("div",n,[(0,o.Wm)("div",i,[(0,o.Wm)(D,{onClick:k.closeFile,color:"negative",label:"Close"},null,8,["onClick"]),(0,o.Wm)("div",r,[(0,o.Wm)(D,{disable:k.localData.current_step<=0,onClick:k.handleBack,outline:"",color:"negative",label:"Send back"},null,8,["disable","onClick"]),(0,o.Wm)(D,{onClick:k.handleForward,outline:"",color:"primary",label:"Forward"},null,8,["onClick"])])]),(0,o.Wm)("div",c,[(0,o.Wm)("div",m,[(0,o.Wm)("div",d,[p,(0,o.Wm)("span",u,(0,l.zw)(null===(a=k.localData)||void 0===a?void 0:a.application_code),1)]),(0,o.Wm)("div",f,[v,(0,o.Wm)("span",g,(0,l.zw)(null===(S=k.localData)||void 0===S?void 0:S.regn_no),1)]),(0,o.Wm)("div",b,[w,(0,o.Wm)("span",h,(0,l.zw)(null===(_=k.localData)||void 0===_?void 0:_.regn_no),1)])]),(0,o.Wm)("div",W,[(0,o.Wm)(D,{onClick:t[1]||(t[1]=e=>{k.localData.openHistory=!k.localData.openHistory,k.fetchMovements()}),"no-caps":"",outline:"",flat:"",label:"Movement History"}),(0,o.Wm)(D,{to:{name:"application:detail"},"no-caps":"",color:"primary",flat:"",label:"View Application"})]),(0,o.Wm)("div",y,[(0,o.Wm)(C,{id:e.$route.params.id},null,8,["id"])]),(0,o.Wm)("div",q,[(0,o.Wm)(Q,{onNotes:t[2]||(t[2]=e=>k.localData.notes=e)})])])]),(0,o.Wm)(D,{to:{name:"note:create",params:{id:e.$route.params.id}},fab:"",icon:"edit",color:"primary",class:"absolute-bottom-right q-mr-xl q-mb-xl"},null,8,["to"]),(0,o.Wm)(x,{modelValue:k.localData.openHistory,"onUpdate:modelValue":t[3]||(t[3]=e=>k.localData.openHistory=e),side:"right",behavior:"mobile"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{movements:k.localData.movements},null,8,["movements"])])),_:1},8,["modelValue"]),(0,o.Wm)(z,{modelValue:k.localData.createStatus,"onUpdate:modelValue":t[5]||(t[5]=e=>k.localData.createStatus=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onExposeList:t[4]||(t[4]=e=>k.localData.states=e)})])),_:1},8,["modelValue"])]})),_:1})}a(7280),a(5363);var S=a(1959);const _=(0,o.Wm)("h1",{class:"zsubtitle q-ma-md"},"Notes",-1);function Z(e,t,a,s,n,i){const r=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),m=(0,o.up)("q-item"),d=(0,o.up)("q-list"),p=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(o.HY,null,[_,(0,o.Wm)(d,{title:"Notes",separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.$props.notes,(t=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(m,{to:{name:"note:detail",params:{id:e.$route.params.id,note:t.id}},key:t.id,clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(null===t||void 0===t?void 0:t.title),1)])),_:2},1024),(0,o.Wm)(r,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(null===t||void 0===t?void 0:t.written_by),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])),[[p]]))),128))])),_:1})],64)}var D=a(9582),C=a(5474);const Q={props:["notes"],setup(e,t){(0,D.yj)();return{}}};var U=a(7011),x=a(3414),V=a(2035),z=a(2350),j=a(6489),$=a(7518),L=a.n($);Q.render=Z;const F=Q;L()(Q,"components",{QList:U.Z,QItem:x.Z,QItemSection:V.Z,QItemLabel:z.Z}),L()(Q,"directives",{Ripple:j.Z});var H=a(8825),I=a(2215);const A={class:"row"},M={class:"flex justify-between col-12"},N=(0,o.Wm)("p",{class:"zsubtitle"},"Application statuses",-1);function B(e,t,a,s,n,i){const r=(0,o.up)("q-btn"),c=(0,o.up)("q-step"),m=(0,o.up)("q-stepper"),d=(0,o.up)("q-space");return(0,o.wg)(),(0,o.j4)("div",A,[(0,o.Wm)("div",M,[(0,o.WI)(e.$slots,"header",{},(()=>[N]))]),(0,o.Wm)(r,{flat:"",onClick:t[1]||(t[1]=t=>e.$refs.stepper.previous()),icon:"arrow_left"}),(0,o.Wm)(m,{flat:"",modelValue:s.localState.selected,"onUpdate:modelValue":t[2]||(t[2]=e=>s.localState.selected=e),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.$props.states,((e,t)=>((0,o.wg)(),(0,o.j4)(c,{onClick:e=>s.localState.selected=t,name:t,title:e.name,icon:"dot",done:!0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.remark),1)])),_:2},1032,["onClick","name","title"])))),256))])),_:1},8,["modelValue"]),(0,o.Wm)(d),(0,o.Wm)(r,{flat:"",onClick:t[3]||(t[3]=t=>e.$refs.stepper.next()),icon:"arrow_right"})])}var E=a(8880);const Y=(0,o.Wm)("h1",{class:"zsubtitle col-12"},"Update application status",-1),K=(0,o.Uk)(" Maximum File Upload size 2mb "),R={class:"col-xs-12"};function O(e,t,a,l,s,n){const i=(0,o.up)("q-input"),r=(0,o.up)("q-editor"),c=(0,o.up)("q-btn"),m=(0,o.up)("q-file"),d=(0,o.up)("q-form"),p=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(p,{flat:"",style:{"min-width":"480px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{onSubmit:l.submitStatus,class:"row q-col-gutter-md zcard"},{default:(0,o.w5)((()=>[Y,(0,o.Wm)(i,{modelValue:l.formData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.name=e),outlined:"",class:"col-xs-12",rules:[e=>!!e||"Name is required"],label:"Status"},null,8,["modelValue","rules"]),(0,o.Wm)(r,{class:"col-12",modelValue:l.formData.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.remark=e),flat:"","content-class":"bg-amber-3","toolbar-text-color":"white","toolbar-toggle-color":"yellow-8","toolbar-bg":"primary",toolbar:[["bold","italic","underline"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h3","h4","h5","h6","code"]}],["viewsource"]]},null,8,["modelValue","toolbar"]),(0,o.Wm)(m,{filled:"",class:"col-xs-12","bottom-slots":"","max-file-size":"24800",modelValue:l.formData.attachment,"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.attachment=e),label:"Attachment",counter:""},{hint:(0,o.w5)((()=>[K])),append:(0,o.w5)((()=>[(0,o.Wm)(c,{round:"",dense:"",flat:"",icon:"add",onClick:t[3]||(t[3]=(0,E.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue"]),(0,o.Wm)("div",R,[(0,o.Wm)(c,{type:"submit",label:"Submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1})}const P={emits:["exposeList"],name:"create-state",setup(e,t){const a=(0,D.yj)(),o=(0,H.Z)(),l=(0,S.qj)({name:"",remark:"",attachment:null}),s=e=>{const s=a.params.id,n=new FormData;n.append("name",l.name),n.append("remark",l.remark),n.append("attachment",l.attachment),C.api.post(`applications/${s}/states`,n).then((a=>{const{list:l,message:s}=a.data;t.emit("exposeList",l),o.notify({type:"positive",message:s}),null===e||void 0===e||e.target.reset()})).catch((e=>{var t;o.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString()})}))};return{formData:l,submitStatus:s}}};var T=a(151),G=a(5269),J=a(4689),X=a(239),ee=a(4974),te=a(2165);P.render=O;const ae=P;L()(P,"components",{QCard:T.Z,QForm:G.Z,QInput:J.Z,QEditor:X.Z,QFile:ee.Z,QBtn:te.Z});const oe={props:{states:Array},name:"states",components:{CreateState:ae},setup(e,t){const a=(0,S.qj)({selected:0});return{localState:a}}};var le=a(3518),se=a(6552),ne=a(2025);oe.render=B;const ie=oe;L()(oe,"components",{QBtn:te.Z,QStepper:le.Z,QStep:se.Z,QSpace:ne.Z});const re={class:"row"},ce={class:"flex justify-between col-12"},me=(0,o.Wm)("p",{class:"zsubtitle"},"Certificate",-1),de={class:"col-12"},pe={class:"col-12"},ue={class:"flex-inline"};function fe(e,t,a,s,n,i){const r=(0,o.up)("q-space"),c=(0,o.up)("q-btn"),m=(0,o.up)("q-separator"),d=(0,o.up)("q-icon"),p=(0,o.up)("q-item-section"),u=(0,o.up)("q-item-label"),f=(0,o.up)("q-item"),v=(0,o.up)("q-list"),g=(0,o.up)("upload-certificate"),b=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)("div",re,[(0,o.Wm)("div",ce,[(0,o.WI)(e.$slots,"header",{},(()=>[me,(0,o.Wm)(r),(0,o.Wm)(c,{onClick:t[1]||(t[1]=e=>s.localState.openUpload=!0),outline:"",label:"Upload certificate"})]))]),(0,o.Wm)("div",de,[(0,o.Wm)(m,{class:"q-my-md"})]),(0,o.Wm)("div",pe,[(0,o.Wm)(v,{separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(s.localState.certificates,((e,t)=>((0,o.wg)(),(0,o.j4)(f,{key:t},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"attachment"})])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)((null===e||void 0===e?void 0:e.name)||"Certificate"),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",ue,[(0,o.Wm)(c,{onClick:t=>s.downloadCert(e),round:"",flat:"",size:"md",icon:"cloud_download"},null,8,["onClick"]),(0,o.Wm)(c,{onClick:t=>s.deleteCert(e),round:"",flat:"",size:"md",icon:"delete"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})]),(0,o.Wm)(b,{modelValue:s.localState.openUpload,"onUpdate:modelValue":t[2]||(t[2]=e=>s.localState.openUpload=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onExposeList:s.onUploaded},null,8,["onExposeList"])])),_:1},8,["modelValue"])])}const ve=(0,o.Wm)("h1",{class:"zsubtitle col-12"},"Update application status",-1),ge=(0,o.Uk)(" Maximum File Upload size 2mb "),be={class:"col-xs-12"};function we(e,t,a,l,s,n){const i=(0,o.up)("q-input"),r=(0,o.up)("q-editor"),c=(0,o.up)("q-btn"),m=(0,o.up)("q-file"),d=(0,o.up)("q-form"),p=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(p,{flat:"",style:{"min-width":"480px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{onSubmit:l.submitStatus,class:"row q-col-gutter-md zcard"},{default:(0,o.w5)((()=>[ve,(0,o.Wm)(i,{modelValue:l.formData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.formData.name=e),outlined:"",class:"col-xs-12",rules:[e=>!!e||"Name is required"],label:"Name of certificate"},null,8,["modelValue","rules"]),(0,o.Wm)(r,{class:"col-12",modelValue:l.formData.remark,"onUpdate:modelValue":t[2]||(t[2]=e=>l.formData.remark=e),flat:"","content-class":"bg-amber-3","toolbar-text-color":"white","toolbar-toggle-color":"yellow-8","toolbar-bg":"primary",toolbar:[["bold","italic","underline"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h3","h4","h5","h6","code"]}],["viewsource"]]},null,8,["modelValue","toolbar"]),(0,o.Wm)(m,{filled:"",class:"col-xs-12","bottom-slots":"","max-file-size":"24800",modelValue:l.formData.attachment,"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.attachment=e),label:"Attachment",counter:""},{hint:(0,o.w5)((()=>[ge])),append:(0,o.w5)((()=>[(0,o.Wm)(c,{round:"",dense:"",flat:"",icon:"add",onClick:t[3]||(t[3]=(0,E.iM)((()=>{}),["stop"]))})])),_:1},8,["modelValue"]),(0,o.Wm)("div",be,[(0,o.Wm)(c,{type:"submit",label:"Submit",color:"primary"})])])),_:1},8,["onSubmit"])])),_:1})}const he={emits:["exposeList"],name:"upload-certificate",setup(e,t){const a=(0,D.yj)(),o=(0,H.Z)(),l=(0,S.qj)({name:"",remark:"",attachment:null}),s=e=>{const s=a.params.id,n=new FormData;n.append("name",l.name),n.append("remark",l.remark),n.append("attachment",l.attachment),C.api.post(`applications/${s}/certificate`,n).then((a=>{const{list:l,message:s}=a.data;t.emit("exposeList",l),o.notify({type:"positive",message:s}),null===e||void 0===e||e.target.reset()})).catch((e=>{var t;o.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString()})}))};return{formData:l,submitStatus:s}}};he.render=we;const We=he;L()(he,"components",{QCard:T.Z,QForm:G.Z,QInput:J.Z,QEditor:X.Z,QFile:ee.Z,QBtn:te.Z});const ye={props:{id:Number},name:"certificates",components:{UploadCertificate:We,CreateState:ae},setup(e,t){const a=(0,H.Z)(),l=(0,D.yj)(),s=(0,S.qj)({openUpload:!1,selected:{},certificates:[]}),n=e=>{s.certificates=e,s.openUpload=!1},i=e=>{C.api.delete(`applications/${l.params.id}/${e.id}/certificate`).then((e=>{s.certificates=e.data.list,a.notify({type:"positive",message:e.data.message})})).catch((e=>{var t;return a.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString()})}))},r=e=>{let t=document.createElement("a");t.href=e.full_path,t.target="_blank",t.click()};return(0,o.bv)((()=>{const e=l.params.id;C.api.get(`applications/${e}/certificates`).then((e=>{const{list:t}=e.data;s.certificates=t})).catch((e=>{var t;a.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString()})}))})),{downloadCert:r,onUploaded:n,deleteCert:i,localState:s}}};var qe=a(5869),ke=a(4554),Se=a(6778);ye.render=fe;const _e=ye;L()(ye,"components",{QSpace:ne.Z,QBtn:te.Z,QSeparator:qe.Z,QList:U.Z,QItem:x.Z,QItemSection:V.Z,QIcon:ke.Z,QItemLabel:z.Z,QDialog:Se.Z});const Ze={components:{Certificates:_e,CreateState:ae,States:ie,Movement:I.Z,List:F},setup(){const e=(0,S.iH)(!0),t=(0,D.yj)(),a=(0,D.tv)(),l=(0,H.Z)(),s=(0,S.qj)({createStatus:!1,notes:[],states:[],openHistory:!1,movements:[]}),n=()=>{const e=t.params.id;C.api.get(`applications/${e}/movements`).then((e=>{s.movements=e.data}))},i=()=>{const e=t.params.id;C.api.get(`applications/${e}/states`).then((e=>{s.states=e.data,console.log(e)}))},r=e=>{C.api.get(`applications/${e}`).then((e=>{const{regn_no:t,application_code:a,current_step:o,last_step:l,id:n,created_at:i,profile:r}=e.data;s.id=n,s.current_step=o,s.last_step=l,s.regn_no=t,s.application_code=a,s.profile=r,s.createdAt=i})).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString();l.notify({type:"negative",message:a})}))},c=e=>{C.api.get(`applications/${e}/notes`).then((e=>[s.notes=e.data.list])).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString();l.notify({type:"negative",message:a})}))};(0,o.bv)((()=>{const e=t.params.id;c(e),r(e),i(e)}));const m=()=>{const e=t.params.id;C.api.post(`applications/${e}/forward`).then((e=>{const{message:t,list:o,data:s}=e.data;l.notify({type:"positive",message:t}),a.replace({name:"staff:dashboard"})})).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString();l.notify({type:"negative",message:a})}))},d=()=>{s.createStatus=!0},p=()=>{const{id:e}=t.params;C.api.post(`applications/${e}/close`).then((e=>{l.notify({type:"positive",message:e.data.message}),setTimeout((()=>{a.replace({name:"staff:dashboard"})}),1e3)})).catch((e=>{var t;l.notify({type:"negative",message:(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString()})}))},u=()=>{const e=t.params.id;C.api.post(`applications/${e}/backward`).then((e=>{const{message:t,list:o,data:s}=e.data;l.notify({type:"positive",message:t}),a.replace({name:"staff:dashboard"})})).catch((e=>{var t;let a=(null===(t=e.response)||void 0===t?void 0:t.message)||e.toString();l.notify({type:"negative",message:a})}))};return{fetchMovements:n,handleBack:u,leftDrawerOpen:e,localData:s,handleAdd:d,handleForward:m,closeFile:p,toggleLeftDrawer(){e.value=!e.value}}}};var De=a(4379),Ce=a(6873);Ze.render=k;const Qe=Ze;L()(Ze,"components",{QPage:De.Z,QBtn:te.Z,QDialog:Se.Z,QCard:T.Z,QDrawer:Ce.Z})}}]);