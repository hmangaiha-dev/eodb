"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[4606],{4606:(a,e,n)=>{n.r(e),n.d(e,{default:()=>R});n(7280);var o=n(3673);const t={class:"row "},l={class:"col-xs-12"},i=(0,o.Uk)("View Application"),s=(0,o.Uk)("Reopen application ");function d(a,e,n,d,p,r){const c=(0,o.up)("q-icon"),u=(0,o.up)("q-input"),m=(0,o.up)("q-item-label"),g=(0,o.up)("q-item-section"),f=(0,o.up)("q-item"),v=(0,o.up)("q-list"),w=(0,o.up)("q-btn-dropdown"),b=(0,o.up)("q-td"),h=(0,o.up)("q-table"),_=(0,o.up)("movement"),q=(0,o.up)("q-card-section"),y=(0,o.up)("q-btn"),W=(0,o.up)("q-card-actions"),Z=(0,o.up)("q-card"),D=(0,o.up)("q-dialog"),Q=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(Q,{class:"container-lg zcard q-my-md",padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",t,[(0,o.Wm)("div",l,[(0,o.Wm)(h,{pagination:d.tableData.pagination,"onUpdate:pagination":e[2]||(e[2]=a=>d.tableData.pagination=a),loading:d.localData.loading,onRequest:d.onRequest,flat:"",title:"Archived Applications",rows:d.tableData.data,columns:d.columns,"row-key":"fullname","binary-state-sort":"","rows-per-page-options":[7,15,30,50]},{"top-right":(0,o.w5)((()=>[(0,o.Wm)(u,{outlined:"",dense:"",modelValue:d.localData.search,"onUpdate:modelValue":e[1]||(e[1]=a=>d.localData.search=a),onChange:d.handleSearch,placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(c,{name:"search"})])),_:1},8,["modelValue","onChange"])])),"body-cell-action":(0,o.w5)((a=>[(0,o.Wm)(b,{props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{rounded:"","dropdown-icon":"arrow_drop_down","no-caps":"",label:"Action",outline:"",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{separator:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:e=>d.viewApplication(a.row.id),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[i])),_:1})])),_:1})])),_:2},1032,["onClick"]),(0,o.Wm)(f,{onClick:e=>d.reopen(a.row.id),clickable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[s])),_:1})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["pagination","loading","onRequest","rows","columns"])])]),(0,o.Wm)(D,{modelValue:d.localData.openMovementHistory,"onUpdate:modelValue":e[4]||(e[4]=a=>d.localData.openMovementHistory=a)},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{movements:d.localData.movements},null,8,["movements"])])),_:1}),(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{outline:"",color:"negative",label:"Close",onClick:e[3]||(e[3]=a=>d.localData.openMovementHistory=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}n(9544),n(5363);var p=n(5474),r=n(1959),c=n(5616),u=n(8825),m=n(9582),g=n(2215);const f=[{name:"application_name",align:"left",label:"Application",field:"application_name",sortable:!0},{name:"regn_no",align:"left",label:"Registration No",field:"regn_no",sortable:!0},{name:"created_at",align:"left",label:"Submitted At",field:"created_at",format:a=>c.ZP.formatDate(a,"DD-MMYYYY hh:mm a")},{name:"action",align:"center",label:"Action",field:"id"}],v={components:{Movement:g.Z},setup(){const a=(0,u.Z)(),e=(0,m.tv)(),n=((0,m.yj)(),(0,r.qj)({loading:!1,openMovementHistory:!1,movements:[],search:""})),t=(0,r.qj)({data:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}}),l=a=>{i(t)},i=e=>{const{page:o,rowsPerPage:l,sortBy:i,descending:s}=e.pagination;n.loading=!0,p.api.get("office/applications/archived",{params:{page:o,rowsPerPage:l,sortBy:i,descending:s,search:n.search}}).then((a=>{const{current_page:e,per_page:n,data:o,to:l,total:i}=a.data;t.data=o,t.pagination.rowsNumber=i,t.pagination.page=e,t.pagination.rowsPerPage=n,console.log(a.data)})).catch((e=>{var n,o,t,l;(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)&&a.notify({type:"negative",message:null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message})})).finally((()=>n.loading=!1))};(0,o.bv)((()=>{i({pagination:t.pagination,filter:void 0})}));const s=a=>{e.push({name:"ongoing-applications:detail",params:{id:a}})},d=n=>{console.info(n),p.api.get(`applications/${n}/reopen`).then((n=>{var o;a.notify({type:"positive",message:null===(o=n.data)||void 0===o?void 0:o.message}),setTimeout((()=>{e.replace({name:"staff:dashboard"})}),1e3)})).catch((e=>{var n;a.notify({type:"negative",message:(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.message)||e.toString()})}))};return{onRequest:i,columns:f,tableData:t,localData:n,handleSearch:l,viewApplication:s,reopen:d}}};var w=n(4379),b=n(6023),h=n(4689),_=n(4554),q=n(3884),y=n(2670),W=n(7011),Z=n(3414),D=n(2035),Q=n(2350),k=n(9721),C=n(6778),A=n(151),P=n(5589),M=n(9367),S=n(2165),V=n(7518),B=n.n(V);v.render=d;const R=v;B()(v,"components",{QPage:w.Z,QTable:b.Z,QInput:h.Z,QIcon:_.Z,QTd:q.Z,QBtnDropdown:y.Z,QList:W.Z,QItem:Z.Z,QItemSection:D.Z,QItemLabel:Q.Z,QBadge:k.Z,QDialog:C.Z,QCard:A.Z,QCardSection:P.Z,QCardActions:M.Z,QBtn:S.Z})}}]);