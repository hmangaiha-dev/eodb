"use strict";(self["webpackChunkquasar_frontend"]=self["webpackChunkquasar_frontend"]||[]).push([[650],{3650:(a,e,n)=>{n.r(e),n.d(e,{default:()=>Z});n(7280);var l=n(3673),o=n(2323);const t=(0,l.Wm)("h1",{class:"ztitle"},"Staff postings",-1),s={class:"row zdetailcard"},i={class:"col-xs-12"},r={class:"zlabel"};function d(a,e,n,d,p,u){const c=(0,l.up)("q-btn"),g=(0,l.up)("q-space"),m=(0,l.up)("q-icon"),f=(0,l.up)("q-input"),w=(0,l.up)("q-td"),b=(0,l.up)("q-badge"),v=(0,l.up)("q-table"),h=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(h,{class:"container-lg",padding:""},{default:(0,l.w5)((()=>[t,(0,l.Wm)("div",s,[(0,l.Wm)("div",i,[(0,l.Wm)(v,{pagination:d.tableData.pagination,"onUpdate:pagination":e[2]||(e[2]=a=>d.tableData.pagination=a),loading:d.localData.loading,onRequest:d.onRequest,flat:"",rows:d.tableData.data,columns:d.columns,"row-key":"fullname","binary-state-sort":"","rows-per-page-options":[7,15,30,50]},{top:(0,l.w5)((()=>[(0,l.Wm)(c,{to:{name:"posting:create"},outline:"",color:"primary",label:"New Posting"}),(0,l.Wm)(g),(0,l.Wm)(f,{outlined:"",dense:"",modelValue:d.localData.search,"onUpdate:modelValue":e[1]||(e[1]=a=>d.localData.search=a),onChange:d.handleSearch,placeholder:"Search"},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"search"})])),_:1},8,["modelValue","onChange"])])),"body-cell-current_post":(0,l.w5)((a=>[(0,l.Wm)(w,{props:a},{default:(0,l.w5)((()=>{var e,n;return[(0,l.Wm)("p",r,(0,o.zw)(null===(e=a.row.current_post)||void 0===e?void 0:e.code)+" : "+(0,o.zw)(null===(n=a.row.current_post)||void 0===n?void 0:n.name),1)]})),_:2},1032,["props"])])),"body-cell-roles":(0,l.w5)((a=>[(0,l.Wm)(w,{props:a},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(a.row.roles,(a=>((0,l.wg)(),(0,l.j4)(b,{key:a.id,label:a.name},null,8,["label"])))),128))])),_:2},1032,["props"])])),_:1},8,["pagination","loading","onRequest","rows","columns"])])])])),_:1})}n(9544);var p=n(1959),u=n(5474),c=n(8825);const g=[{name:"fullname",align:"left",label:"Fullname",field:"full_name",sortable:!0},{name:"email",align:"left",label:"Email",field:"email",sortable:!0},{name:"roles",align:"left",label:"Roles",field:"roles"},{name:"current_post",align:"center",label:"Post",field:"current_post"},{name:"status",align:"left",label:"Status",field:"current_post",format:a=>a.pivot.status}],m={setup(){const a=(0,c.Z)(),e=(0,p.qj)({loading:!1,search:""}),n=(0,p.qj)({data:[],pagination:{sortBy:"id",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}}),o=a=>{t(n)},t=l=>{const{page:o,rowsPerPage:t,sortBy:s,descending:i}=l.pagination;e.loading=!0,u.api.get("posting/index",{params:{page:o,rowsPerPage:t,sortBy:s,descending:i,search:e.search}}).then((a=>{const{current_page:e,per_page:l,data:o,to:t,total:s}=a.data.data;n.data=o,n.pagination.rowsNumber=s,n.pagination.page=e,n.pagination.rowsPerPage=l,console.log(a.data)})).catch((e=>{var n,l,o,t;(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)&&a.notify({type:"negative",message:null===(o=e.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message})})).finally((()=>e.loading=!1))};return(0,l.bv)((()=>{t({pagination:n.pagination,filter:void 0})})),{onRequest:t,visibleColumns:(0,p.iH)(["staff","office","designation","role","joined_at","status"]),columns:g,tableData:n,localData:e,handleSearch:o}}};var f=n(4379),w=n(3200),b=n(2165),v=n(2025),h=n(4689),_=n(4554),q=n(3884),y=n(9721),P=n(7518),W=n.n(P);m.render=d;const Z=m;W()(m,"components",{QPage:f.Z,QTable:w.Z,QBtn:b.Z,QSpace:v.Z,QInput:h.Z,QIcon:_.Z,QTd:q.Z,QBadge:y.Z})}}]);